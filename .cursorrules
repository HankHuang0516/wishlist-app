
# Wishlist.ai - Agent Rules & Documentation Guide

## 0. Pre-Work Requirements (å¿…è®€)
- **ALWAYS read this file first** before starting any work.
- Based on the task type, read the corresponding documentation files listed below.

---

## ğŸ“š Documentation Reference Guide

### ä¾æ“šä»»å‹™é¡å‹é¸æ“‡è®€å–çš„æ–‡ä»¶ï¼š

| ä»»å‹™é¡å‹ | å¿…è®€æ–‡ä»¶ |
|----------|----------|
| **ä¸€èˆ¬é–‹ç™¼/åŠŸèƒ½é–‹ç™¼** | `server/src/data/FAQ.md` |
| **é€²ç‰ˆ/éƒ¨ç½²é©—è­‰** | `REGRESSION_TEST_PLAN.md` |
| **å®‰å…¨å¯©è¨ˆ** | `security/audit/Security-Audit-Prompt_Traditional-Chinese.md` |
| **å®‰å…¨æŒ‡å—** | `security/guidelines/Security-Guidelines_Traditional-Chinese.md` |
| **å®‰å…¨æŒ‡å—èªªæ˜** | `security/guidelines/Security-Guidelines-Explanation_Traditional-Chinese.md` |
| **å®‰å…¨ä¿®å¾©** | `security-fixes.md` |
| **å‰ç«¯é–‹ç™¼** | `client/README.md` |

### æ–‡ä»¶è·¯å¾‘é€ŸæŸ¥ï¼š

```
wishlist-app/
â”œâ”€â”€ .cursorrules                    # ğŸ”´ Agent è¦å‰‡ (å¿…è®€)
â”œâ”€â”€ security-fixes.md               # å®‰å…¨ä¿®å¾©ç´€éŒ„
â”œâ”€â”€ client/
â”‚   â””â”€â”€ README.md                   # å‰ç«¯èªªæ˜
â”œâ”€â”€ server/
â”‚   â””â”€â”€ src/data/
â”‚       â””â”€â”€ FAQ.md                  # â­ ç”¢å“ FAQ (ä¸€èˆ¬ä»»å‹™å¿…è®€)
â””â”€â”€ security/
    â”œâ”€â”€ audit/
    â”‚   â””â”€â”€ Security-Audit-Prompt_*.md    # å®‰å…¨å¯©è¨ˆæç¤º (16 èªè¨€)
    â””â”€â”€ guidelines/
        â”œâ”€â”€ Security-Guidelines_*.md       # å®‰å…¨æŒ‡å— (16 èªè¨€)
        â””â”€â”€ Security-Guidelines-Explanation_*.md  # æŒ‡å—èªªæ˜ (16 èªè¨€)
```

---

## ğŸ”’ Security & Operational Rules

### 1. Terminal Command Execution
- **NEVER chain commands** using `;` or `&&` (e.g., `git add . ; git commit`).
- ALWAYS execute commands sequentially in separate steps.
- **CRITICAL: FORBIDDEN CHARACTERS**
  - **NEVER** use the following characters in ANY command argument (especially `git commit -m`):
    - `&` (Ampersand) -> Use `and`
    - `$` (Dollar Sign) -> Remove or describe
    - `|` (Pipe) -> Remove
    - `;` (Semicolon) -> Remove
    - `(` or `)` (Parentheses) -> Remove
  - **NEVER** use redirect operators in commands (they bypass Allow List):
    - `>` or `>>` (Output Redirect) -> Write output in script instead
    - `<` (Input Redirect) -> Pass as argument instead
  - PowerShell treats these as operators/variables, triggering unavoidable permission prompts.
  - âŒ `npx tsx script.ts > output.txt`
  - âœ… `npx tsx script.ts` (with `fs.writeFileSync` in script)
  - âŒ `git commit -m "Fix UI & API"`
  - âœ… `git commit -m "Fix UI and API"`

### 2. Deployment
- **éƒ¨ç½²å‰å¿…é ˆåŸ·è¡Œ `npm run test -- --run` ç¢ºèªæ‰€æœ‰æ¸¬è©¦é€šéã€‚**
- **æ¯æ¬¡éƒ¨ç½²éƒ½å¿…é ˆæ›´æ–° `client/package.json` ç‰ˆæœ¬è™Ÿ**ï¼ˆä½¿ç”¨ `git rev-list --count HEAD` + 1ï¼‰ã€‚
- **æ‰‹å‹•è§¸ç™¼éƒ¨ç½²**ï¼špush å®Œæˆå¾Œï¼Œå†åŸ·è¡Œä¸€æ¬¡ç©º commit ä¾†ç¢ºä¿ Railway é–‹å§‹éƒ¨ç½²ï¼š
  ```
  git commit --allow-empty -m "chore: Trigger redeploy"
  git push
  ```
- The Git "Always Allow" rule is configured for `git` prefix.
- **Git commit messages**: é¿å…åœ¨ `-m` è¨Šæ¯ä¸­ä½¿ç”¨ç‰¹æ®Šå­—å…ƒï¼ˆå¦‚ `$`, `()`, `&`, `+`ï¼‰ï¼Œå› ç‚º PowerShell å¯èƒ½æœƒå°‡å…¶è§£æç‚ºè®Šæ•¸æˆ–é‹ç®—ç¬¦ï¼Œå°è‡´éœ€è¦æ¬Šé™ç¢ºèªã€‚
  - âŒ `git commit -m "feat: Add 25+ currencies"`
  - âœ… `git commit -m "feat: Add 25 currencies support"`

### 3. Environment
- Use `IPv4` first resolution for Node to avoid Railway/Gmail blocks.
- Trim whitespace from all Environment Variables.

### 4. PowerShell Pipeline Commands
- å³ä½¿å–®ç¨çš„æŒ‡ä»¤åœ¨ Allow List ä¸­ï¼ˆå¦‚ `npm`, `Select-String`, `Select-Object`ï¼‰ï¼Œ**ç®¡é“çµ„åˆæŒ‡ä»¤** ä»å¯èƒ½éœ€è¦æ‰‹å‹•ç¢ºèªã€‚
- é€™æ˜¯å› ç‚º PowerShell çš„ token åŒ¹é…æ©Ÿåˆ¶å°ç®¡é“ (`|`) çµ„åˆè¼ƒç‚ºè¬¹æ…ã€‚
- **å»ºè­°**ï¼šç›´æ¥åŸ·è¡Œç´” `npm` æŒ‡ä»¤ï¼Œä¸ç”¨ç®¡é“éæ¿¾ï¼Œä»¥ç¢ºä¿ Allow List æ­£å¸¸é‹ä½œã€‚



---

## ğŸŒ Multi-Language Support

å®‰å…¨ç›¸é—œæ–‡ä»¶æ”¯æ´ä»¥ä¸‹èªè¨€ï¼š
- Arabic (é˜¿æ‹‰ä¼¯æ–‡)
- Dutch (è·è˜­æ–‡)
- English (è‹±æ–‡)
- French (æ³•æ–‡)
- German (å¾·æ–‡)
- Italian (ç¾©å¤§åˆ©æ–‡)
- Japanese (æ—¥æ–‡)
- Korean (éŸ“æ–‡)
- Portuguese (è‘¡è„ç‰™æ–‡)
- Russian (ä¿„æ–‡)
- Simplified-Chinese (ç°¡é«”ä¸­æ–‡)
- Spanish (è¥¿ç­ç‰™æ–‡)
- Thai (æ³°æ–‡)
- **Traditional-Chinese (ç¹é«”ä¸­æ–‡)** â† é è¨­
- Vietnamese (è¶Šå—æ–‡)
