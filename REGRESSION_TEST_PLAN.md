# Wishlist.ai Regression Test Plan

> **ç‰ˆæœ¬**: v1.0  
> **æ—¥æœŸ**: 2026-01-01  
> **ç›®çš„**: é€²ç‰ˆå‰é©—è­‰ç³»çµ±ç©©å®šæ€§

---

## ğŸ“‹ æ¸¬è©¦æ¦‚è¦½

| é¡åˆ¥ | æ¸¬è©¦æ•¸é‡ | é ä¼°æ™‚é–“ |
|------|----------|----------|
| **Quick Smoke Test** | 5 é … | 2 åˆ†é˜ |
| **Core Functionality** | 15 é … | 10 åˆ†é˜ |
| **Full Regression** | 30+ é … | 30 åˆ†é˜ |

---

## ğŸš€ Quick Smoke Test (é€²ç‰ˆå‰å¿…æ¸¬)

æ¯æ¬¡éƒ¨ç½²å‰**å¿…é ˆ**é€šéä»¥ä¸‹ 5 é …æ¸¬è©¦ï¼š

### 1. æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•
```bash
# å‰ç«¯å»ºç½®
cd client && npm run build

# å¾Œç«¯å•Ÿå‹•
cd server && npm run dev
```
âœ… **Pass Criteria**: ç„¡éŒ¯èª¤è¼¸å‡ºï¼Œæœå‹™æ­£å¸¸å•Ÿå‹•

### 2. ç™»å…¥æµç¨‹
- [ ] é–‹å•Ÿé¦–é  â†’ é»æ“Šç™»å…¥
- [ ] è¼¸å…¥æ¸¬è©¦å¸³è™Ÿ â†’ æˆåŠŸç™»å…¥
- [ ] Header é¡¯ç¤ºä½¿ç”¨è€…åç¨±/é ­åƒ

### 3. é¡˜æœ›æ¸…å–®é¡¯ç¤º
- [ ] ç™»å…¥å¾Œèƒ½çœ‹åˆ°é¡˜æœ›æ¸…å–®åˆ—è¡¨
- [ ] é»æ“Šé¡˜æœ›æ¸…å–®å¯é€²å…¥è©³ç´°é 

### 4. æ–°å¢é¡˜æœ› (AI åŠŸèƒ½)
- [ ] é»æ“Š "+" æŒ‰éˆ•
- [ ] ä½¿ç”¨ Smart Input è¼¸å…¥å•†å“åç¨±
- [ ] AI æ­£ç¢ºå›å‚³å•†å“è³‡è¨Š

### 5. åŸºæœ¬ API å¥åº·æª¢æŸ¥
```bash
curl https://[YOUR_RAILWAY_URL]/api/health
```
âœ… **Pass Criteria**: å›å‚³ 200 OK

---

## ğŸ”§ Unit Tests (è‡ªå‹•åŒ–)

### åŸ·è¡ŒæŒ‡ä»¤
```bash
cd client
npm run test
```

### ç¾æœ‰æ¸¬è©¦
| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `client/src/App.test.tsx` | App å…ƒä»¶ Smoke Test |

### å¾…æ–°å¢æ¸¬è©¦
- [ ] `auth.test.ts` - ç™»å…¥/è¨»å†Šé‚è¼¯
- [ ] `wishlist.test.ts` - é¡˜æœ›æ¸…å–® CRUD
- [ ] `ai.test.ts` - AI è¾¨è­˜çµæœè§£æ

---

## ğŸ§ª Core Functionality Tests

### A. èªè­‰æ¨¡çµ„ (Auth)

| ID | æ¸¬è©¦é …ç›® | æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|------|----------|
| A1 | è¨»å†Šæ–°å¸³è™Ÿ | å¡«å¯«æ‰‹æ©Ÿ+å¯†ç¢¼ â†’ é€å‡º | æˆåŠŸå»ºç«‹å¸³è™Ÿä¸¦ç™»å…¥ |
| A2 | ç™»å…¥ | è¼¸å…¥æ­£ç¢ºå¸³å¯† | æˆåŠŸç™»å…¥ï¼Œè·³è½‰é¦–é  |
| A3 | ç™»å…¥å¤±æ•— | è¼¸å…¥éŒ¯èª¤å¯†ç¢¼ | é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ |
| A4 | ç™»å‡º | è¨­å®šé  â†’ ç™»å‡º | æ¸…é™¤ sessionï¼Œè·³è½‰ç™»å…¥é  |
| A5 | å¿˜è¨˜å¯†ç¢¼ | è¼¸å…¥æ‰‹æ©Ÿ â†’ OTP â†’ æ–°å¯†ç¢¼ | å¯†ç¢¼é‡è¨­æˆåŠŸ |

### B. é¡˜æœ›æ¸…å–®æ¨¡çµ„ (Wishlist)

| ID | æ¸¬è©¦é …ç›® | æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|------|----------|
| B1 | æ–°å¢é¡˜æœ›æ¸…å–® | Dashboard â†’ æ–°å¢ | æ–°æ¸…å–®å‡ºç¾ |
| B2 | ç·¨è¼¯æ¸…å–®åç¨± | é»æ“Šç·¨è¼¯ â†’ ä¿®æ”¹ â†’ å„²å­˜ | åç¨±æ›´æ–° |
| B3 | åˆªé™¤æ¸…å–® | é•·æŒ‰/å³éµ â†’ åˆªé™¤ â†’ ç¢ºèª | æ¸…å–®æ¶ˆå¤± |
| B4 | æ–°å¢é¡˜æœ›é …ç›® | + â†’ è¼¸å…¥è³‡è¨Š â†’ å„²å­˜ | é …ç›®å‡ºç¾åœ¨æ¸…å–®ä¸­ |
| B5 | åˆªé™¤é¡˜æœ›é …ç›® | æ»‘å‹•/é»æ“Šåˆªé™¤ | é …ç›®æ¶ˆå¤± |
| B6 | ç·¨è¼¯é¡˜æœ›é …ç›® | é»æ“Šé …ç›® â†’ ä¿®æ”¹ â†’ å„²å­˜ | è³‡è¨Šæ›´æ–° |

### C. AI åŠŸèƒ½æ¨¡çµ„

| ID | æ¸¬è©¦é …ç›® | æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|------|----------|
| C1 | åœ–ç‰‡è¾¨è­˜ | ä¸Šå‚³å•†å“æˆªåœ– | AI å›å‚³åç¨±/åƒ¹æ ¼/é€£çµ |
| C2 | Smart Input | è¼¸å…¥ "Apple AirPods" | AI æœå°‹ä¸¦å›å‚³å•†å“è³‡è¨Š |
| C3 | è²¼ä¸Šé€£çµ | è²¼ä¸Šå•†å“ URL | è‡ªå‹•æ“·å–å•†å“è³‡è¨Š |

### D. ç¤¾ç¾¤åŠŸèƒ½æ¨¡çµ„ (Social)

| ID | æ¸¬è©¦é …ç›® | æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|------|----------|
| D1 | æœå°‹ä½¿ç”¨è€… | è¼¸å…¥åç¨± â†’ æœå°‹ | é¡¯ç¤ºç¬¦åˆçš„ä½¿ç”¨è€… |
| D2 | è¿½è¹¤ä½¿ç”¨è€… | é»æ“Šè¿½è¹¤æŒ‰éˆ• | æŒ‰éˆ•è®Šç‚ºå·²è¿½è¹¤ |
| D3 | å–æ¶ˆè¿½è¹¤ | é»æ“Šå·²è¿½è¹¤ â†’ å–æ¶ˆ | æŒ‰éˆ•è®Šå›è¿½è¹¤ |
| D4 | æŸ¥çœ‹è¿½è¹¤è€…æ¸…å–® | Social é  â†’ è¿½è¹¤è€… | é¡¯ç¤ºè¿½è¹¤è€…åˆ—è¡¨ |
| D5 | æŸ¥çœ‹æœ‹å‹é¡˜æœ›æ¸…å–® | é»æ“Šæœ‹å‹ â†’ é¡˜æœ›æ¸…å–® | é¡¯ç¤ºå…¬é–‹æ¸…å–® |

### E. è¨­å®šæ¨¡çµ„ (Settings)

| ID | æ¸¬è©¦é …ç›® | æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|------|----------|
| E1 | æ›´æ›é ­åƒ | ä¸Šå‚³æ–°åœ–ç‰‡ | é ­åƒæ›´æ–° |
| E2 | ä¿®æ”¹å¯†ç¢¼ | èˆŠå¯†ç¢¼ â†’ æ–°å¯†ç¢¼ â†’ ç¢ºèª | å¯†ç¢¼æ›´æ–°æˆåŠŸ |
| E3 | èªè¨€åˆ‡æ› | é¸æ“‡ä¸åŒèªè¨€ | UI èªè¨€åˆ‡æ› |

---

## ğŸŒ API Regression Tests

### åŸ·è¡ŒæŒ‡ä»¤ï¼ˆå¦‚æœ‰ï¼‰
```bash
cd server
npm run test
```

### API Endpoints æª¢æŸ¥æ¸…å–®

| è·¯ç”± | Method | Endpoint | æ¸¬è©¦é …ç›® |
|------|--------|----------|----------|
| Auth | POST | `/api/auth/register` | è¨»å†Š |
| Auth | POST | `/api/auth/login` | ç™»å…¥ |
| Wishlist | GET | `/api/wishlists` | å–å¾—æ¸…å–® |
| Wishlist | POST | `/api/wishlists` | æ–°å¢æ¸…å–® |
| Item | POST | `/api/items` | æ–°å¢é …ç›® |
| AI | POST | `/api/ai/analyze` | åœ–ç‰‡åˆ†æ |
| Social | GET | `/api/social/search` | æœå°‹ä½¿ç”¨è€… |
| Social | POST | `/api/social/follow` | è¿½è¹¤ |
| User | GET | `/api/user/profile` | å–å¾—å€‹äººè³‡æ–™ |
| Payment | POST | `/api/payment/subscribe` | è¨‚é–± |

---

### F. Bug Regression Tests (å·²ä¿®å¾©å•é¡Œé©—è­‰)

| ID | æ¸¬è©¦é …ç›® | è§¸ç™¼æ¢ä»¶/æ­¥é©Ÿ | é æœŸçµæœ |
|----|----------|--------------|----------|
| F1 | `Shopee Soft Block` è™•ç† | è¼¸å…¥ Shopee é€£çµ (è§¸ç™¼ Robot Check) | Server åµæ¸¬ "Soft block detected"ï¼Œè‡ªå‹•åˆ‡æ›è‡³ AI Fallback |
| F2 | `Smart Search` (Shopee IDs) | URL ç‚º `shopee.tw/product/123/456` | ç³»çµ±è¾¨è­˜ ID ä¸¦åŸ·è¡Œ `site:shopee.tw "123" "456"` æœå°‹ |
| F3 | `Gemini Grounding` Fallback | Google Custom Search å¤±æ•—/ç„¡çµæœ | AI è‡ªå‹•ä½¿ç”¨å…§å»º `googleSearch` å·¥å…·æŸ¥å‡ºæ­£ç¢ºå•†å“ (å¦‚éŠæˆ²åç¨±) |
| F4 | `Resend API` ç¼ºå¤±å•Ÿå‹• | ç§»é™¤ `.env` ä¸­çš„ `RESEND_API_KEY` ä¸¦å•Ÿå‹• Server | Server æ­£å¸¸å•Ÿå‹•ä¸å´©æ½° (ä½¿ç”¨ Mock Key) |
| F5 | `Gemini Model` ç‰ˆæœ¬ç¢ºèª | åŸ·è¡Œ AI åˆ†æ | ç„¡ `404 Not Found` éŒ¯èª¤ (ä½¿ç”¨ `gemini-1.5-flash-001`) |
| F6 | `TS Error` (GoogleSearch) | åŸ·è¡Œ `npm run dev` (Server) | ç„¡ `TS2353` ç·¨è­¯éŒ¯èª¤ (ä½¿ç”¨ `@ts-ignore` æˆ–æ­£ç¢ºå‹åˆ¥) |
| F7 | `Social Follow` | é»æ“Šè¿½è¹¤ä½¿ç”¨è€… | API å›å‚³ 200 OK (é 500)ï¼Œè³‡æ–™åº«æ–°å¢é—œè¯ |
| F8 | `AI Image Double Fallback` | ç¶²å€ç„¡æ³•ç›´æ¥æŠ“åœ–æ™‚ (å¦‚ Shopee ID) | è§¸ç™¼ "Secondary Image Search"ï¼Œç¢ºä¿é¡¯ç¤ºæœ‰æ•ˆåœ–ç‰‡éç ´åœ–(X) |
| F9 | `Static File Serving` | å‰ç«¯ (5173) è®€å–å¾Œç«¯ (8000) åœ–ç‰‡ | åœ–ç‰‡æ­£å¸¸é¡¯ç¤ºï¼Œç„¡ 403 Forbidden æˆ– CORP éŒ¯èª¤ (Helmet Config Correct) |
| F10 | `E-commerce Crawler Resilience` | æ¸¬è©¦ Momo, PChome, Yahoo, Books çˆ¬èŸ² | å…¨æ•¸é€šé (Status 200, Content Loaded)ï¼Œç„¡é˜»æ“‹ |
| F11 | `Google CSE ID è¨­å®š` | åŸ·è¡Œ `searchGoogleWeb("momoè³¼ç‰©ç¶²")` | è¿”å› `totalResults > 0`ï¼Œé 0 çµæœ (ç¢ºä¿ CSE è¨­å®šç‚ºæœå°‹æ•´å€‹ç¶²è·¯) |
| F12 | `Momo å•†å“åç¨±è§£æ` | æ·»åŠ  Momo URL `i_code=14244558` | å•†å“åé¡¯ç¤ºå®Œæ•´åç¨±ï¼ˆå¦‚ Nintendo Switchï¼‰ï¼Œéã€Œå¾…ç¢ºèªå•†å“ã€|
| F13 | `Proactive Smart Search` | ä½¿ç”¨ Momo/PChome/Shopee URL | ç³»çµ±åŸ·è¡Œ Google CSE æœå°‹å¾Œå†å‚³çµ¦ AIï¼Œæœ‰ `Got search context` log |


---

## ğŸ“± Cross-Platform Tests (PWA)

| å¹³å° | æ¸¬è©¦é …ç›® |
|------|----------|
| **Desktop (Chrome)** | å®‰è£ PWAã€é›¢ç·šåŠŸèƒ½ |
| **Android (Chrome)** | åŠ åˆ°ä¸»ç•«é¢ã€æ¨æ’­é€šçŸ¥ |
| **iOS (Safari)** | åŠ åˆ°ä¸»ç•«é¢ã€å…¨è¢å¹•æ¨¡å¼ |

---

## ğŸš¨ é€²ç‰ˆå‰ Checklist

```
[ ] 1. åŸ·è¡Œ Quick Smoke Test (5 é …å…¨é)
[ ] 2. åŸ·è¡Œ Unit Tests: `cd client && npm run test`
[ ] 3. å»ºç½®æˆåŠŸ: `cd client && npm run build`
[ ] 4. æ›´æ–°ç‰ˆæœ¬è™Ÿ: `client/package.json`
[ ] 5. Git commit & push
[ ] 6. åˆ° Railway ç¢ºèªéƒ¨ç½²æˆåŠŸ
[ ] 7. åœ¨ Production åŸ·è¡Œ Smoke Test
```

---

## ğŸ“Š æ¸¬è©¦å ±å‘Šæ¨¡æ¿

```markdown
# Regression Test Report
- **æ—¥æœŸ**: YYYY-MM-DD
- **ç‰ˆæœ¬**: v0.0.XX
- **æ¸¬è©¦è€…**: [Name]

## æ¸¬è©¦çµæœ
| é¡åˆ¥ | é€šé | å¤±æ•— | ç•¥é |
|------|------|------|------|
| Quick Smoke | X/5 | X/5 | X/5 |
| Unit Tests | X/X | X/X | X/X |
| Core | X/15 | X/15 | X/15 |

## å¤±æ•—é …ç›®
| ID | å•é¡Œæè¿° | åš´é‡ç¨‹åº¦ |
|----|----------|----------|
| XX | [æè¿°] | High/Medium/Low |

## çµè«–
[ ] âœ… å¯ä»¥éƒ¨ç½²
[ ] âš ï¸ æœ‰å•é¡Œéœ€ä¿®å¾©
[ ] âŒ ä¸å¯éƒ¨ç½²
```
