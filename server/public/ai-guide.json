{
    "meta": {
        "title": "Wishlist.ai API Guide for AI Agents",
        "version": "2.0.0",
        "description": "This guide enables AI agents to autonomously authenticate and interact with the Wishlist.ai API.",
        "instructions_for_ai": "Follow the authentication_flow to obtain API access. The user will provide their phone number and password. Use these to login, generate an API key, and then use that key for all subsequent requests."
    },
    "authentication_flow": {
        "overview": "AI agents should authenticate by logging in with user credentials, then generating an API key for persistent access.",
        "step_1_login": {
            "description": "Login with user credentials to get a JWT token",
            "method": "POST",
            "url": "https://wishlist-app-production.up.railway.app/api/auth/login",
            "body": {
                "phoneNumber": "string (user's phone, e.g. 0912345678)",
                "password": "string (user's password)"
            },
            "response": {
                "token": "JWT token for authenticated requests"
            }
        },
        "step_2_generate_api_key": {
            "description": "Generate an API key for persistent access (recommended)",
            "method": "POST",
            "url": "https://wishlist-app-production.up.railway.app/api/users/me/apikey",
            "headers": {
                "Authorization": "Bearer <jwt_token_from_step_1>"
            },
            "response": {
                "apiKey": "API key starting with sk_live_..."
            },
            "note": "Store this key securely. It can be used instead of JWT for all API calls."
        },
        "step_3_use_api_key": {
            "description": "Use the API key for all subsequent requests",
            "header": "x-api-key: <your_api_key>",
            "example": "x-api-key: sk_live_abc123def456..."
        }
    },
    "base_url": "https://wishlist-app-production.up.railway.app/api",
    "endpoints": {
        "wishlists": {
            "list_wishlists": {
                "method": "GET",
                "path": "/wishlists",
                "description": "Get all wishlists for the authenticated user."
            },
            "create_wishlist": {
                "method": "POST",
                "path": "/wishlists",
                "body": {
                    "title": "string (required)",
                    "description": "string (optional)",
                    "isPublic": "boolean"
                }
            },
            "get_wishlist": {
                "method": "GET",
                "path": "/wishlists/{id}"
            },
            "update_wishlist": {
                "method": "PUT",
                "path": "/wishlists/{id}"
            },
            "delete_wishlist": {
                "method": "DELETE",
                "path": "/wishlists/{id}"
            }
        },
        "items": {
            "add_item": {
                "method": "POST",
                "path": "/wishlists/{wishlistId}/items",
                "content_type": "multipart/form-data",
                "body": {
                    "image": "file (optional)",
                    "name": "string (required)",
                    "price": "string (optional)",
                    "link": "string (optional)",
                    "notes": "string (optional)"
                }
            },
            "add_item_from_url": {
                "method": "POST",
                "path": "/wishlists/{wishlistId}/items/url",
                "body": {
                    "url": "string (required) - Product page URL"
                },
                "description": "Crawls the URL and extracts product info automatically."
            },
            "get_item": {
                "method": "GET",
                "path": "/items/{id}"
            },
            "update_item": {
                "method": "PUT",
                "path": "/items/{id}"
            },
            "delete_item": {
                "method": "DELETE",
                "path": "/items/{id}"
            }
        },
        "user": {
            "get_my_profile": {
                "method": "GET",
                "path": "/users/me"
            },
            "update_my_profile": {
                "method": "PUT",
                "path": "/users/me"
            },
            "get_delivery_info": {
                "method": "GET",
                "path": "/users/{userId}/delivery-info",
                "description": "Get delivery info of mutual friends for gift sending."
            }
        }
    },
    "usage_notes": {
        "rate_limits": "Handle 429 errors gracefully.",
        "error_format": "Errors return { \"error\": \"message\" }",
        "image_upload": "Use multipart/form-data with 'image' field for photo uploads."
    }
}